/* ================================
   Tema / variables
================================ */
:root{
  --bg: #0f172a;
  --card: #0b1023;
  --surface:#0d132b;
  --muted:#9aa4b2;
  --text:#e6edf3;
  --primary:#7c3aed;
  --primary-2:#5b21b6;

  /* Colores matriz/leyenda */
  --c-marginal:#f8fafc;
  --c-aceptable:#fef08a;
  --c-importante:#fecaca;
  --c-muygrave:#f87171;

  /* Encabezados matriz */
  --c-encabezado:#f59e0b;
  --c-encabezado-col:#0b1630;
  --c-encabezado-row:#0ea5e9;

  /* Tipos */
  --font-base: 16px;
  --matrix-font: 20px;
  --matrix-number-weight: 900;
}

/* Reset m√≠nimo */
*{ box-sizing:border-box }
html,body{ height:100% }
body{
  margin:0;
  font-size:var(--font-base);
  font-family: system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial, "Noto Sans", "Liberation Sans", sans-serif;
  background:
    radial-gradient(1200px 600px at 100% -10%, rgba(124,58,237,.25), transparent 60%),
    radial-gradient(1200px 600px at -10% 100%, rgba(16,185,129,.15), transparent 60%),
    linear-gradient(180deg, #0b1023, #0f172a 30%, #0b1023 100%);
  color:var(--text);
}

/* Header */
.app-header{
  position:sticky; top:0; z-index:10;
  background:linear-gradient(90deg, rgba(124,58,237,.25), rgba(16,185,129,.15));
  border-bottom:1px solid #1f2741;
  backdrop-filter: blur(10px);
}
.header-inner{
  display:flex; gap:16px; align-items:center;
  max-width:1100px; margin:auto; padding:16px 20px;
}
.logo{
  display:grid; place-items:center; width:42px; height:42px;
  border-radius:10px;
  background:radial-gradient(circle at 30% 30%, #10b981, #0ea5e9);
  color:white; font-size:22px;
}
.titles h1{ margin:0; font-size:20px; font-weight:800; letter-spacing:.3px;}

/* Layout / Paneles */
.container{ max-width:1100px; margin:24px auto; padding:0 16px}
.panel{
  background: rgba(255,255,255,.02);
  border:1px solid #1f2741;
  border-radius:14px;
  box-shadow: 0 10px 30px rgba(0,0,0,.25), inset 0 1px rgba(255,255,255,.05);
  margin-bottom:22px; padding:18px;
}
.panel-title{
  margin:0 0 12px 0; font-size:18px; font-weight:800;
  display:flex; align-items:center; gap:8px;
}

/* Campos */
.field{ margin-bottom:14px}
.field label{
  display:block; font-weight:800; margin-bottom:6px;
  text-transform:uppercase; color:#cbd5e1;
}
.field textarea,
.field select{
  width:100%;
  padding:12px 12px;
  border-radius:10px;
  background:#0b1023;
  border:1px solid #1f2741;
  color:var(--text);
  outline:none;
}
.field textarea:focus,
.field select:focus{ border-color:#2563eb; box-shadow:0 0 0 3px rgba(37,99,235,.25) }
.grid-2{ display:grid; grid-template-columns:1fr 1fr; gap:14px}
.muted{ color:var(--muted); font-size:12px}

/* Botones */
.actions{ display:flex; gap:10px; margin-top:8px; align-items:center }
.btn{
  appearance:none; border:none; cursor:pointer;
  border-radius:10px; padding:12px 16px; font-weight:800;
  background:#1f2741; color:var(--text);
}
.btn.primary{
  background:linear-gradient(180deg, var(--primary), var(--primary-2));
  box-shadow:0 10px 25px rgba(124,58,237,.25);
}
.btn.error{
  background:linear-gradient(180deg, #ef4444, #b91c1c);
  box-shadow:0 10px 25px rgba(239,68,68,.25);
}
.btn:disabled{ opacity:.6; cursor:not-allowed}
.mt-8{ margin-top:16px }

/* Resultado */
.resultado{
  display:flex; align-items:center; gap:14px;
  padding:14px; border-radius:12px; margin-top:12px;
  border:1px solid #293152; background:rgba(255,255,255,.02);
}
.resultado-badge{
  display:flex; gap:10px; align-items:center;
  padding:10px 14px; border-radius:1000px; font-weight:900;
  background:#0b1023; border:1px solid #1f2741;
}
.resultado-badge .bi{ font-size:18px }
.resultado-info .muted{margin-top:4px; display:block}

/* Matriz */
.tabla-wrap{ overflow:auto; border-radius:12px; border:1px solid #1f2741 }
.matriz{
  width:100%; border-collapse:separate; border-spacing:0;
  background:#0b1023;
}
.matriz th, .matriz td{
  border-right:1px solid #1f2741;
  border-bottom:1px solid #1f2741;
  text-align:center; padding:0;
}
.matriz th{
  background:#11183a; color:#000;
  font-size:var(--matrix-font); font-weight:900;
  padding:12px 8px; text-transform:uppercase;
}
.matriz th small{
  display:block; margin-top:4px; font-size:1em; opacity:.9; text-transform:uppercase;
}
.matriz .corner{
  background:var(--c-encabezado); color:#000; font-weight:900; text-transform:uppercase;
  position:sticky; left:0; z-index:2;
}
.matriz .hgh{
  background:var(--c-encabezado); color:#000; font-weight:900; text-transform:uppercase;
}
.matriz thead tr:nth-child(1) th{ background:var(--c-encabezado); color:#000; }
.matriz thead tr:nth-child(2) th{ background:var(--c-encabezado-col); color:#e6edf3; }
.matriz .lbl-ap{
  background:var(--c-encabezado-row); color:#000; font-weight:900; text-transform:uppercase;
  position:sticky; left:0; z-index:1;
}
.cell{
  position:relative; padding:18px 0;
  font-size:var(--matrix-font); font-weight:var(--matrix-number-weight);
  color:#111; user-select:none;
}
.marginal   { background:var(--c-marginal); }
.aceptable  { background:var(--c-aceptable); }
.importante { background:var(--c-importante); }
.muygrave   { background:var(--c-muygrave); color:#111; }
td .cell.selected{
  transform: scale(1.04);
  border-radius:8px;
  box-shadow: 0 0 0 3px #000, 0 8px 18px rgba(0,0,0,.35);
  z-index:3;
}
.row-highlight .cell{ box-shadow:none !important }
td.col-highlight{ background:inherit !important }
.matriz tr:last-child td{ border-bottom:none }
.matriz tr th:last-child, .matriz tr td:last-child{ border-right:none }

/* Leyenda */
.legend summary{ cursor:pointer; font-weight:800; }
.legend-items{
  display:grid; gap:10px;
  grid-template-columns: repeat(auto-fit,minmax(240px,1fr));
  margin-top:10px;
}
.lg-item{
  display:flex; align-items:center; gap:10px;
  background:#0b1023; border:1px solid #1f2741;
  padding:10px 12px; border-radius:10px;
}
.lg-item .color{
  width:18px; height:18px; border-radius:4px; border:2px solid #1f2741;
}
.color-marginal   { background: var(--c-marginal); }
.color-aceptable  { background: var(--c-aceptable); }
.color-importante { background: var(--c-importante); }
.color-muygrave   { background: var(--c-muygrave); }

/* Footer */
.app-footer{ text-align:center; color:var(--muted); margin:20px 0 6px }

/* Responsive */
@media (max-width: 640px){
  :root{ --matrix-font: 18px; }
}
